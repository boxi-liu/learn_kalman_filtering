**协方差**
$COV(X,Y)=\frac{1}{N-1}xy^T-\frac{N}{N-1}u_xu_y$
*$u_x,u_y为x，y的均值$*
物理意义：两个或两个以上随机变量的相关程度的度量
<bar>
**多变量卡尔曼滤波**
*b站的学习足以应对一维卡尔曼滤波，再次不多叙述*
1. 状态外插方程（状态预测器方程）
   ![error](./截图%202025-08-29%2016-40-07.png)

<!-- *笔者现在的学习过程中，更倾向于认为多变量卡尔曼滤波是一种对原五个方程的多维赋值的运用，故而后续多示例为主* -->

*在多变量中，笔者认为其作用就是将描述状态的多个变量用矩阵使其一个式子表达*

示例--对于没有输入的匀加速飞机系统
![error](./截图%202025-08-29%2019-24-08.png)

示例--对于有输入的匀加速飞机系统和自由落体

示例--对于有输入的匀加速飞机系统和自由落体
![error](./截图%202025-08-29%2019-25-55.png)
![error](./截图%202025-08-29%2019-26-02.png)

**状态外插方程推导**
为推出该形式：
$\widehat{x}_{n+1,n}=F\widehat{x}_{n,n}+G\widehat{u}_{n,n}+w_n$
我们需要对系统进行建模，也就是思考出系统的*状态空间表达*:
![error](./截图%202025-08-29%2019-59-43.png)

示例：匀速运动物体

系统没有输入：
$u(t)=0$v
状态空间向量：
$x(t)=\begin{bmatrix}
   p\\
   v\\
\end{bmatrix}$

$\dot{x}(t)=Ax(t)+Bu(t)$
![error](./截图%202025-08-29%2020-06-00.png)

？？？？？？

辅助方程补充
![error](./截图%202025-08-29%2020-36-39.png)
![error](./截图%202025-08-29%2020-36-31.png)

<!-- *最终的碎碎念：卡尔曼滤波的重点在于状态方程的建模，剩下的式子皆为机械性的公式套参？？* -->

物理意义汇总：
![error](./截图%202025-08-29%2016-40-07.png)
状态转移矩阵：不同时刻状态函数中不同参数需要不同的映射，组合成的矩阵
控制矩阵：与上类似，输入应下一时刻状态函数不同参数需要不同的映射，组合成的矩阵
![error](./截图%202025-08-30%2011-05-37.png)
![error](./截图%202025-08-30%2011-07-30.png)
观测矩阵：将状态函数映射到测量向量

![error](./截图%202025-08-30%2011-09-57.png)
![error](./截图%202025-08-30%2011-10-56.png)
简化版：
![error](./截图%202025-08-30%2011-14-12.png)
![error](./截图%202025-08-30%2011-11-27.png)

协方差矩阵代码实现：
```MATLAB
x = [2 3 -1 4];
y = [8 7 9 6];

C = cov(x,y)

C =

    4.6667   -2.6667
   -2.6667    1.6667

```

协方差椭圆代码示例
```MATLAB
C = [5 -2; -2 1];

[eigVec,eigVal] = eig(C);

if eigVal(1,1) >eigVal(2,2)
   a = sqrt(eigVal(1,1));
   b = sqrt(eigVal(2,2));

   theta atan(eigVec(2,1)/eigVec(1,1));
else

   a = sqrt(eigVal(2,2));
   b = sqrt(eigVal(1,1));

   theta = atan(eigVec(2,2)/eigVec(2,1));
```
